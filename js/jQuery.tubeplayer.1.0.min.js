(function(f){function q(c,b){b=f.extend({},r,b);if(c.hasClass(j))return c;c.addClass(j).data(l,b);for(e in m)c.bind(e+k,c,m[e]);var a=b.playerID;n.push(a);s(f.tubeplayer.defaults,b,a);var d="tubeplayer-player-container-"+n.length;jQuery("<div></div>").attr("id",d).appendTo(c);t(d,c,b,a);return c}function s(c,b,a){var d=c.onPlayer;d.unstarted[a]=b.onPlayerUnstarted;d.ended[a]=b.onPlayerEnded;d.playing[a]=b.onPlayerPlaying;d.paused[a]=b.onPlayerPaused;d.buffering[a]=b.onPlayerBuffering;d.cued[a]=b.onPlayerCued;
c.onQualityChange[a]=b.onQualityChange;c=c.onErr;c.notFound[a]=b.onErrorNotFound;c.notEmbeddable[a]=b.onErrorNotEmbeddable}function t(c,b,a,d){a.iframed&&u()?v(c,b,a,d):w(c,b,a,d)}function u(){return!!document.createElement("video").canPlayType}function w(c,b,a,d){swfobject.embedSWF("http://www.youtube.com/v/"+a.initialVideo+"?fs=1&enablejsapi=1&version=3&playerapiid="+d,c,a.width,a.height,"8",null,null,{allowScriptAccess:a.allowScriptAccess,wmode:"transparent",allowFullScreen:a.allowFullScreen},
{id:d});onYouTubePlayerReady=function(h){var i=document.getElementById(h);i.addEventListener("onStateChange","$.tubeplayer.defaults.stateChange('"+h+"')");i.addEventListener("onError","$.tubeplayer.defaults.onError('"+h+"')");i.addEventListener("onPlaybackQualityChange","$.tubeplayer.defaults.qualityChange('"+h+"')");h=f(i).parents("."+j);f.tubeplayer.defaults.afterReady(h)}}function v(c,b,a,d){b=document.createElement("script");b.src="http://www.youtube.com/player_api";var h=document.getElementsByTagName("script")[0];
h.parentNode.insertBefore(b,h);a.playerID=c;onYouTubePlayerAPIReady=function(){new YT.Player(c,{videoId:a.initialVideo,width:a.width,height:a.height,playerVars:{autoplay:a.autoplay,controls:a.showcontrols},events:{onReady:function(i){o[a.playerID]=i.target;i=f(i.target).parents("."+j);f.tubeplayer.defaults.afterReady(i)},onPlaybackQualityChange:f.tubeplayer.defaults.qualityChange(d),onStateChange:f.tubeplayer.defaults.stateChange(d),onError:f.tubeplayer.defaults.onError(d)}})}}var k=".tubeplayer",
j="-youtube-tubeplayer-",l="opts"+k,n=[],o={};f.tubeplayer={};f.tubeplayer.defaults={afterReady:function(){},stateChange:function(c){var b=this.onPlayer;return function(a){if(typeof a=="object")a=a.data;switch(a){case -1:return b.unstarted[c]();case 0:return b.ended[c]();case 1:return b.playing[c]();case 2:return b.paused[c]();case 3:return b.buffering[c]();case 5:return b.cued[c]();default:return null}}},onError:function(c){var b=this.onErr;return function(a){if(typeof a=="object")a=a.data;switch(a){case 100:case 150:return b.notFound[c]();
case 101:return b.notEmbeddable[c]();default:return null}}},qualityChange:function(c){var b=this;return function(a){if(typeof a=="object")a=a.data;return b.onQualityChange[c](a)}},onQualityChange:{},onPlayer:{unstarted:{},ended:{},playing:{},paused:{},buffering:{},cued:{}},onErr:{notFound:{},notEmbeddable:{}}};var r={allowScriptAccess:"always",width:425,height:355,allowFullScreen:"true",initialVideo:"DkoeNLuMbcI",playerID:"youtube-player",preferredQuality:"default",iframed:true,autoplay:0,showcontrols:1,
onPlay:function(){},onPause:function(){},onStop:function(){},onSeek:function(){},onMute:function(){},onUnMute:function(){},onPlayerUnstarted:function(){},onPlayerEnded:function(){},onPlayerPlaying:function(){},onPlayerPaused:function(){},onPlayerBuffering:function(){},onPlayerCued:function(){},onQualityChange:function(){},onErrorNotFound:function(){},onErrorNotEmbeddable:function(){}};f.fn.tubeplayer=function(c,b){var a=f(this),d=typeof c;if(arguments.length==0||d=="object")return q(a,c);else if(d==
"string")return a.triggerHandler(c+k,b||null)};var g=function(c){return function(b,a){var d=p.getPkg(b);if(d.ytplayer){b=c(b,a,d);if(typeof b=="undefined")b=d.$player;return b}return d.$player}},m={cue:g(function(c,b,a){a.ytplayer.cueVideoById(b,a.opts.preferredQuality)}),play:g(function(c,b,a){if(typeof b=="object")a.ytplayer.loadVideoById(b.id,b.time,a.opts.preferredQuality);else b?a.ytplayer.loadVideoById(b,0,a.opts.preferredQuality):a.ytplayer.playVideo();a.opts.onPlay(b)}),pause:g(function(c,
b,a){a.ytplayer.pauseVideo();a.opts.onPause()}),stop:g(function(c,b,a){a.ytplayer.stopVideo();a.opts.onStop()}),seek:g(function(c,b,a){a.ytplayer.seekTo(b,true);a.opts.onSeek(b)}),mute:g(function(c,b,a){a.ytplayer.mute();a.opts.onMute()}),unmute:g(function(c,b,a){a.ytplayer.unMute();a.ytplayer.setVolume(50);a.opts.onUnMute()}),isMuted:g(function(c,b,a){return a.ytplayer.isMuted()}),volume:g(function(c,b,a){if(b)a.ytplayer.setVolume(b);else return a.ytplayer.getVolume()||-1}),quality:g(function(c,
b,a){if(b)a.ytplayer.setPlaybackQuality(b);else return a.ytplayer.getPlaybackQuality()}),data:g(function(c,b,a){c={};a=a.ytplayer;c.bytesLoaded=a.getVideoBytesLoaded();c.bytesTotal=a.getVideoBytesTotal();c.startBytes=a.getVideoStartBytes();c.state=a.getPlayerState();c.currentTime=a.getCurrentTime();c.availableQualityLevels=a.getAvailableQualityLevels();c.duration=a.getDuration();c.videoURL=a.getVideoUrl();return c}),size:g(function(c,b,a){if(b.width&&b.height){a.ytplayer.setSize(b.width,b.height);
f(a.ytplayer).css(b)}}),destroy:g(function(c,b,a){a.$player.removeClass(j).data(l,null).unbind(k).html("");if(YT)YT.Player=null;f(a.ytplayer).remove();return null}),player:g(function(c,b,a){return a.ytplayer})},p={};p.getPkg=function(c){c=c.data;var b=c.data(l),a;a=b.iframed?o[b.playerID]||null:b?document.getElementById(b.playerID):null;return{$player:c,opts:b,ytplayer:a}}})(jQuery);
